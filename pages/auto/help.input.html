
enclone has [01m[31mtwo[0m mechanisms for specifying input datasets: either directly on the command line or
via a supplementary metadata file. Only one mechanism may be used at a time.

In both cases, you will need to provide paths to directories where the outputs of the Cell Ranger
pipeline may be found.  enclone uses only some of the pipeline output files, so it is enough that
those files are present in given directory, and the particular files that are needed may be found
by typing [01menclone help input_tech[0m.  If you use the argument [01mPRE=p[0m then [01mp/[0m will be prepended to all
pipeline paths.  Moreover (see [01menclone help command[0m), you can avoid putting [01mPRE[0m on the command
line by setting the environment variable [01mENCLONE_PRE[0m to [01mp[0m.

Both input forms involve abbreviated names (discussed below), which should be as short as
possible, as longer abbreviations will increase the width of the clonotype displays.

┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃enclone can use gene expression and feature barcode data, as represented by a feature matrix.    ┃
┃Cell Ranger stores this matrix in an hdf5 file, which while generally very efficient, is not     ┃
┃optimized for interactive use.  Therefore enclone provides an alternate file structure, which    ┃
┃speeds up enclone overall by up to [01m[31m50%[0m.  To use this, add the argument [01mNH5[0m to the enclone command┃
┃line.  This will work so long as you have write permission on input directories.  The first time ┃
┃you run enclone (using given inputs), an alternate file feature_barcode_matrix.bin will be       ┃
┃written; then subsequent invocations will be faster.  Once the file has been created, it will    ┃
┃always be used, regardless of whether [01mNH5[0m is used.  Like with other enclone command-line options,┃
┃if you want [01mNH5[0m on all the time, you can set the environment variable [01mENCLONE_NH5[0m.               ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛

[01m[31m█ 1 █[0m To point directly at input files on the command line, use e.g.
[01mTCR=/home/jdoe/runs/sample345[0m
or likewise for [01mBCR[0m.  A more complicated syntax is allowed in which commas, colons and semicolons
act as delimiters.  Commas go between datasets from the same sample, colons between datasets from
the same donor, and semicolons separate donors.  If semicolons are used, the value must be quoted.

enclone uses the distinction between datasets, samples and donors in the following ways:
1. If two datasets come from the same sample, then enclone can filter to remove certain artifacts,
unless you specify the option [01mNCROSS[0m.
See also [32mhttps://github.com/10XGenomics/enclone/blob/master/pages/expanded.md#readme[0m.
2. If two cells came from different donors, then enclone will not put them in the same clonotype,
unless you specify the option [01mMIX_DONORS[0m.
More information may be found at `enclone help special`.  In addition, this is enclone's way of
keeping datasets organized and affects the output of fields like sample, etc.

┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃[01mNaming.[0m  Using this input system, each dataset is assigned an abbreviated name, which is        ┃
┃everything after the final slash in the directory name (e.g. [01msample345[0m in the above example), or┃
┃the entire name if there is no slash; samples and donors are assigned identifers s1,... and     ┃
┃d1,..., respectively; numbering of samples restarts with each new donor.  [01mTo specify samples[0m    ┃
┃[01mand donors, use the second input form, and see in particular[0m [32mabbr:path[0m[01m.[0m                         ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛

Examples:
[01mTCR=p1,p2[0m   -- input data from two libraries from the same sample
[01mTCR=p1,p2:q[0m -- input data as above plus another from a different sample from the same donor
[01mTCR="a;b"[0m   -- input one library from each of two donors.

Matching gene expression and/or feature barcode data may also be supplied using an argument [01mGEX=...[0m,
whose right side must have the exact same structure as the [01mTCR[0m or [01mBCR[0m argument.  Specification of
both [01mTCR[0m and [01mBCR[0m is not allowed.

[01m[31m█ 2 █[0m To specify a metadata file, use the command line argument
[01mMETA=filename[0m
This file should be a CSV (comma-separated values) file, with one line per cell group.  After the
first line, lines starting with # are ignored.  There must be a field tcr or bcr, and some other
fields are allowed:
┌────────┬───────────────┬────────────────────────────────────────────────────────────────────┐
│[01mfield[0m   │  [01mdefault[0m      │  [01mmeaning[0m                                                           │
├────────┼───────────────┼────────────────────────────────────────────────────────────────────┤
│tcr     │  (required!)  │  path to dataset, or abbr:path, where abbr is an abbreviated       │
│or bcr  │               │  name for the dataset; exactly one of tcr or bcr must be used      │
│gex     │  null         │  path to GEX dataset, which may include or consist entirely        │
│        │               │  of FB data                                                        │
├────────┼───────────────┼────────────────────────────────────────────────────────────────────┤
│sample  │  s1           │  abbreviated name of sample                                        │
├────────┼───────────────┼────────────────────────────────────────────────────────────────────┤
│donor   │  d1           │  abbreviated name of donor                                         │
├────────┼───────────────┼────────────────────────────────────────────────────────────────────┤
│color   │  null         │  color to associate to this dataset (for PLOT option)              │
├────────┼───────────────┼────────────────────────────────────────────────────────────────────┤
│bc      │  null         │  name of CSV file with header "barcode,sample,donor" that          │
│        │               │  assigns a sample and donor name to each barcode; if sample and/or │
│        │               │  donor are also specified, then those are treated as default values│
│        │               │  to be used in case a particular barcode is not specified by bc;   │
│        │               │  a fourth field "tag" is allowed and may be arbitrarily specified  │
│        │               │  Use of bc automatically turns on the MIX_DONORS option.  There is │
│        │               │  an optional field "color" that assigns a color to a barcode,      │
│        │               │  and which is used by the PLOT option.  Finally, any other field   │
│        │               │  name may be specified and then used as a lead variable in PER CELL│
│        │               │  mode, so long as it is not already a lead variable name.          │
└────────┴───────────────┴────────────────────────────────────────────────────────────────────┘

